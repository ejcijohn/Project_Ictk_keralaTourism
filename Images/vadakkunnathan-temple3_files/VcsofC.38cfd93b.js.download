(this.$WP=this.$WP||[]).push(["WtjXQS/VcsofC",(e,a)=>{"use strict";var t,s,o,i,n,r,l,c,u,d,p,g,f,b,m,C,_,v,k,h,w,E,x,N,O,y,P,F=({triggerNext:e,onPopupDismiss:a})=>{var[s]=t.useContext(o),{userId:r,sessionId:u}=t.useContext(i),p="MOBILE"===t.useContext(n).viewportCategory,g=()=>{},b=e||g;return t.useEffect((()=>{(l(u)||r||d(s.page,s.params,p))&&a&&a()}),[r,p,a,s,u]),l(u)||r||d(s.page,s.params,p)?null:f(N,{triggerNext:b,servletName:s.page,onDismiss:()=>{a&&a(),c(u)},trackWouldOpenExplicitPreferences:g,openExplicitPreferences:g,explicitPreferencesEnabled:!1})},B=({localize:e,viewportCategory:a,onDismiss:s,triggerNext:o,openExplicitPreferences:i,trackWouldOpenExplicitPreferences:n,explicitPreferencesEnabled:r,recordEvent:l,domainName:c,appIntegrationConfig:u,login:d})=>{var[p,v]=t.useState(!1),[h,w]=t.useState(!1),[E,x]=t.useState(!1),N=t.useCallback((()=>{E||x(!0)}),[E,x]),O=t.useCallback((()=>{N(),l("facebook_onetap_closed"),s()}),[N,l,s]),y=t.useCallback((()=>{v(!0),window.FB.Event.subscribe("xfbml.render",(()=>{l("facebook_onetap_rendered")})),window.FB.getLoginStatus((e=>{"connected"===e.status||"not_authorized"===e.status?w(!0):(x(!0),o())}))}),[v,w,x,o,l]),P=t.useCallback((()=>{var{sdkUrl:e,appId:a,apiVersion:t}=u;if(e&&a&&t){var s=()=>{},i=new Promise((e=>{s=e}));!function(e,a,t){window.fbAsyncInit=()=>{window.FB.init({appId:e,version:a,status:!0,cookie:!0}),t()}}(a,t,s),i.then(y)}else o()}),[y,u,o]);t.useEffect((()=>{if(E)o();else{l("facebook_onetap_requested");var{sdkUrl:e}=u;g(e||"","MEMX"),P()}}),[P,l,o,E,u]);var F=t.useCallback((e=>{if(!e)return null;var a=e.split(".",2)[1];if(a){var t=atob(a);try{return JSON.parse(t)}catch(e){l("facebook_onetap_parseSignedRequestFailed")}}return null}),[l]),B=t.useCallback((e=>{var a=F(e);a&&a.code&&(m.set("FacebookAuthCode2",a.code,{expires:new Date((new Date).getTime()+5e3),domain:c,path:"/"}),d({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{O()},onSuccess:e=>{e&&e.userId&&(N(),e.hasCreatedMember&&(n&&n(),r&&i&&i()))}}))}),[d,N,n,O,c,r,i,F]),D=t.useCallback((()=>{l("facebook_onetap_clicked"),window.FB.getLoginStatus((e=>{if("connected"===e.status){var{authResponse:a}=e;a&&a.accessToken&&B(a.signedRequest)}}))}),[l,B]);if(E||!p||!h)return null;var I={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")};setTimeout((()=>{window.FB.XFBML.parse()}),50),window.FB.Event.subscribe("auth.authResponseChange",(()=>{D()}));var L="MOBILE"===a;return b("div",{className:C("bEXwb D Gi B1 Z BB","gIfOX"),style:{bottom:L?"0px":"unset"},children:[f(k,{onClick:O}),b("div",{className:"eMzat w z",children:[f("div",{className:"duGRb Ci b f u",children:f("div",{children:I.headline})}),f("p",{className:"UBZtH Mc Nb MA NC",children:I.subhead}),f("div",{className:"bXoCh w",children:f("div",{className:"fJfEa w",children:f("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}})})}),f("div",{className:"cLprX Ci",children:f(_,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}})})]})]})},D={__key:0xb7c064a1dc73,id:"b7c064a1dc739c643393c7082b231ce7",loc:{},definitions:[]},I=({triggerNext:e,onPopupDismiss:a})=>{var[{page:s}]=t.useContext(o),l=u.includes(s),{trackWouldOpenExplicitPreferences:d}=h("ONBOARDING","FB_ONETAP"),p=t.useCallback((()=>{l&&d()}),[d,l]),g=()=>{},b=()=>{var t=e||g;a&&a(),t()},{localize:m}=v(),C=E(),{viewportCategory:_}=t.useContext(n),{domainName:k}=t.useContext(r),N=w(),O=t.useCallback((e=>{N({module:"facebook_onetap",action:e,context:`${s||"unknown"}`})}),[s,N]),{locale:P}=t.useContext(r),F=P.code,{userId:B,sessionId:I}=t.useContext(i),[{data:L,fetching:S,error:R}]=x({query:D,variables:{locale:F},pause:!!B});return t.useEffect((()=>{!R&&L&&L.Facebook_getFbConnectConfig||a&&a()}),[R,L,a]),S?null:!R&&L&&L.Facebook_getFbConnectConfig?f(y,{onDismiss:()=>{a&&a(),c(I)},triggerNext:b,trackWouldOpenExplicitPreferences:p,appIntegrationConfig:L.Facebook_getFbConnectConfig,localize:m,viewportCategory:_,recordEvent:O,domainName:k,login:C}):(b(),null)},L=()=>{var[e,a]=t.useState(!1),[r,c]=t.useState("GOOGLE_ONETAP"),{userId:u,sessionId:p}=t.useContext(i),[{page:g,params:b}]=t.useContext(o),m="MOBILE"===t.useContext(n).viewportCategory;t.useEffect((()=>{l(p)||u||d(g,b,m)?a(!0):e&&a(!1)}),[e,u,p,a,g,b,m]);var C=t.useCallback((()=>{c("FACEBOOK_ONETAP")}),[c]),_=()=>null,v=_,k=[],h="registration_dialog";switch(r){case"GOOGLE_ONETAP":k=["google_one_tap"],v=({dismiss:e})=>f(O,{triggerNext:C,onPopupDismiss:()=>{e()}}),h="google_one_tap";break;case"FACEBOOK_ONETAP":k=["facebook_one_tap"],v=({dismiss:e})=>f(P,{onPopupDismiss:()=>{e()}}),h="facebook_one_tap"}return s({factory:_,eventTypes:k,key:"skip",tier:100,skip:!0}),s({factory:v,eventTypes:k,key:e?`skip_${h}`:h,tier:200,skip:e}),null};return[()=>{N=p.component.onUsage((()=>a("454gno")),"default"),O=F,y=B,P=I,e("default",L)},[e=>t=e,e=>s=e.usePopupHierarchyRender,e=>(o=e.Route,i=e.Visitor,n=e.Device,r=e.Environment),e=>(l=e.shouldSuppressRegistrationDialog,c=e.setRegDialogDismissed,u=e.HOTEL_SERVLETS),e=>d=e.shouldDisableRegDialogForRequiredLoginLithium,e=>(p=e,g=e.importScript),e=>(f=e.jsx,b=e.jsxs),e=>m=e.default,e=>C=e.default,e=>(_=e.UnsafeLocalize,v=e.useLocalize),e=>k=e.CloseIcon,e=>h=e.default,e=>w=e.useGARecorder,e=>E=e.default,e=>x=e.useQuery]]},["cDcdfi","vybtJq","2R4xv2","MWFqPp","wU942v","pLbCP4","F5FCuN","vmXh3M","jSLlaY","0DsHEV","xegF5W","2NwMnm","fsml46","mv7yXI","5X2em-"]]);
